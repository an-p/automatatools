(this.webpackJsonpautomatatools=this.webpackJsonpautomatatools||[]).push([[0],{18:function(t,e,a){},19:function(t,e,a){},21:function(t,e,a){"use strict";a.r(e);var n=a(4),i=a.n(n),r=a(11),c=a.n(r),s=(a(18),a(19),a(2)),o=a(0),d=function(t){var e=t.state,a=e.dfaStates,n=e.initialStateID,i=t.readonly,r=t.renameState,c=t.setInitialState,d=t.setFinalState,u=t.setEdge,l=t.deleteState,j=Array.from(Object.values(a).reduce((function(t,e){return Object.entries(e.edges).filter((function(t){return Object(s.a)(t,2)[1]})).forEach((function(e){var a=Object(s.a)(e,1)[0];return t.add(a)})),t}),new Set));return Object.entries(a).length?Object(o.jsxs)("table",{children:[Object(o.jsxs)("thead",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{rowSpan:2,children:"State"}),Object(o.jsx)("th",{rowSpan:2,children:"Initial"}),Object(o.jsx)("th",{rowSpan:2,children:"Final"}),Object(o.jsx)("th",{colSpan:j.length+(i?0:1),children:"Transitions"})]}),Object(o.jsxs)("tr",{children:[j.map((function(t,e){return Object(o.jsx)("th",{children:t},e)})),!i&&Object(o.jsx)("th",{})]})]}),Object(o.jsx)("tbody",{children:Object.entries(a).map((function(t){var e=Object(s.a)(t,2),b=e[0],h=e[1];return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:i?h.name:Object(o.jsx)("button",{onClick:function(){var t=prompt('Rename state "'.concat(h.name,'" (delete the name to remove the state)'),h.name);null!==t&&(t.length?r&&r(b,t):l&&l(b))},children:h.name})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"radio",checked:b===n,disabled:i,onChange:function(t){t.currentTarget.checked&&c&&c(b)}})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"checkbox",checked:h.final,disabled:i,onChange:function(t){d&&d(b,t.currentTarget.checked)}})}),j.map((function(t,e){var n=h.edges[t];return Object(o.jsx)("td",{children:i?n?a[n].name:"-":Object(o.jsxs)("select",{value:n||"-",onChange:function(e){u&&u(b,t,"-"===e.currentTarget.value?void 0:e.currentTarget.value)},children:[Object(o.jsx)("option",{value:"-",children:"-"}),Object.entries(a).map((function(t){var e=Object(s.a)(t,2),a=e[0],n=e[1];return Object(o.jsx)("option",{value:a,children:n.name},a)}))]})},e)})),!i&&Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(){var t=prompt('Transition from state "'.concat(h.name,'" with letter'));if(null!==t)if(1===t.length){var e=prompt('Transition from state "'.concat(h.name,'" with letter "').concat(t,'" to state'));if(null!==e&&e.length){var n=Object.entries(a).find((function(t){return Object(s.a)(t,2)[1].name===e}));n?u&&u(b,t,n[0]):alert('The state "'.concat(e,'" does not exist.'))}}else alert('Invalid letter "'.concat(t,'" (length must be 1).'))},children:"New"})})]},b)}))})]}):null},u=a(3),l=a(1),j=a(22),b={dfaStates:{}};function h(t,e){switch(e.type){case"RESET":return b;case"ADD_STATE":return function(t){var e,a=j.a();return Object(l.a)(Object(l.a)({},t),{},{dfaStates:Object(l.a)(Object(l.a)({},t.dfaStates),{},Object(u.a)({},a,{name:(e=t.dfaStates,Object.values(e).reduce((function(t,e){var a=Number.parseInt(e.name);return Number.isNaN(a)?t:Math.max(a+1,t)}),0)).toString(),final:!1,edges:{}})),initialStateID:t.initialStateID||a})}(t);case"DELETE_STATE":return function(t,e){return Object(l.a)(Object(l.a)({},t),{},{dfaStates:Object.entries(t.dfaStates).reduce((function(t,a){var n=Object(s.a)(a,2),i=n[0],r=n[1];return i===e.id?t:Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},i,r))}),{}),initialStateID:t.initialStateID===e.id?void 0:t.initialStateID})}(t,e);case"RENAME_STATE":return function(t,e){return Object(l.a)(Object(l.a)({},t),{},{dfaStates:Object(l.a)(Object(l.a)({},t.dfaStates),{},Object(u.a)({},e.id,Object(l.a)(Object(l.a)({},t.dfaStates[e.id]),{},{name:e.newName})))})}(t,e);case"SET_EDGE":return function(t,e){if(e.toID&&!t.dfaStates[e.toID])throw new Error("Cannot add edge to non-existent state.");return Object(l.a)(Object(l.a)({},t),{},{dfaStates:Object(l.a)(Object(l.a)({},t.dfaStates),{},Object(u.a)({},e.fromID,Object(l.a)(Object(l.a)({},t.dfaStates[e.fromID]),{},{edges:Object(l.a)(Object(l.a)({},t.dfaStates[e.fromID].edges),{},Object(u.a)({},e.letter,e.toID))})))})}(t,e);case"SET_INITIAL_STATE":return function(t,e){if(!t.dfaStates[e.id])throw new Error("Cannot set initial state to non-existent state.");return Object(l.a)(Object(l.a)({},t),{},{initialStateID:e.id})}(t,e);case"SET_FINAL_STATE":return function(t,e){return Object(l.a)(Object(l.a)({},t),{},{dfaStates:Object(l.a)(Object(l.a)({},t.dfaStates),{},Object(u.a)({},e.id,Object(l.a)(Object(l.a)({},t.dfaStates[e.id]),{},{final:e.final})))})}(t,e);default:return t}}function f(t){return{dfaStates:Object.entries(t.getStates()).reduce((function(t,e){var a=Object(s.a)(e,2),n=a[0],i=a[1];return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},n,{name:i.name,final:i.final,edges:Object.values(i.edges).reduce((function(t,e){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},e.letter.name,e.to))}),{})}))}),{}),initialStateID:t.getInitialState().id}}var O=function(t){var e=t.apply,a=i.a.useReducer(h,b),n=Object(s.a)(a,2),r=n[0],c=n[1];return Object(o.jsxs)("div",{className:"section",children:[Object(o.jsx)("h2",{children:"Edit DFA"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){return c({type:"ADD_STATE"})},children:"Add State"}),Object(o.jsx)("button",{disabled:!r.initialStateID||!Object.keys(r.dfaStates).length,onClick:function(){return e(r)},children:"Apply"}),Object(o.jsx)("button",{onClick:function(){window.confirm("Reset DFA?")&&c({type:"RESET"})},children:"Reset"})]}),Object(o.jsx)("div",{children:Object(o.jsx)(d,{state:r,renameState:function(t,e){return c({type:"RENAME_STATE",id:t,newName:e})},setInitialState:function(t){return c({type:"SET_INITIAL_STATE",id:t})},setFinalState:function(t,e){return c({type:"SET_FINAL_STATE",id:t,final:e})},setEdge:function(t,e,a){return c({type:"SET_EDGE",fromID:t,letter:e,toID:a})},deleteState:function(t){return c({type:"DELETE_STATE",id:t})}})})]})},m=a(6),v=a(7),S=a(8),x=a(5),p=a(13),g=a(12),E=function(t){Object(p.a)(a,t);var e=Object(g.a)(a);function a(t,n){return Object(m.a)(this,a),e.call(this,Object(l.a)(Object(l.a)({},t),{},{edges:{}}),n)}return Object(v.a)(a,[{key:"addState",value:function(t,e,n){Object(S.a)(Object(x.a)(a.prototype),"_addState",this).call(this,{id:t,name:e,final:!!n,edges:{}})}},{key:"addEdge",value:function(t,e,n){if(!this.states[t])throw new Error("Invalid from state.");if(!this.states[e])throw new Error("Invalid to state.");if(!Object(S.a)(Object(x.a)(a.prototype),"getInputAlphabet",this).call(this).has(n))throw new Error("Letter not in input alphabet.");if(Object.values(this.states[t].edges).find((function(t){return t.letter===n})))throw new Error("A DFA state may not have multiple outgoing edges with the same letter.");Object(S.a)(Object(x.a)(a.prototype),"_addEdge",this).call(this,{letter:n,from:t,to:e,id:j.a()})}},{key:"read",value:function(t){if(!this.getInputAlphabet().has(t))throw new Error("Letter not in input alphabet.");var e=Object.values(this.currentState.edges).find((function(e){return e.letter===t}));if(!e)throw new Error("Edge not defined. A DFA requires all edges to be defined.");return this.states[e.to]}},{key:"reset",value:function(){this.currentState=this.initialState}},{key:"setCurrentState",value:function(t){if(!this.states[t.id])throw new Error("The DFA does not have this state.");this.currentState=t}}]),a}(function(){function t(e,a){Object(m.a)(this,t),this.states=void 0,this.initialState=void 0,this.currentState=void 0,this.inputAlphabet=void 0,this.states=Object(u.a)({},e.id,e),this.initialState=e,this.currentState=e,this.inputAlphabet=a}return Object(v.a)(t,[{key:"_addState",value:function(t){this.states[t.id]=t}},{key:"_addEdge",value:function(t){this.states[t.from].edges[t.id]=t}},{key:"getStates",value:function(){return this.states}},{key:"getInitialState",value:function(){return this.initialState}},{key:"getInputAlphabet",value:function(){return this.inputAlphabet}}]),t}());function A(t,e){return t<=e?"".concat(t,";").concat(e):"".concat(e,";").concat(t)}function y(t,e,a,n){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},A(e.id,a.id),n))}function D(t,e,a){return t[A(e.id,a.id)]}var w=function(){function t(e){Object(m.a)(this,t),this.dfa=void 0,this.stateCount=void 0,this.table=void 0,this.initialStep=void 0,this.dfa=e,this.stateCount=Object.keys(this.dfa.getStates()).length,this.table={},this.initialStep=!0}return Object(v.a)(t,[{key:"run",value:function(){for(var t=this;this.step(););var e=Object.entries(this.dfa.getStates()).reduce((function(e,a){var n=Object(s.a)(a,2),i=n[0],r=n[1];return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},i,Object.entries(t.dfa.getStates()).filter((function(t){var e=Object(s.a)(t,1)[0];return i!==e})).reduce((function(e,a){var n=Object(s.a)(a,2),i=n[0],c=n[1];return D(t.table,r,c)?e:e.concat(i).sort()}),[i])))}),{});if(Object.values(e).every((function(t){return 1===t.length})))return{table:this.table};var a=[],n=Object.entries(e).filter((function(t){var e=Object(s.a)(t,2),a=e[0];return e[1][0]===a})).reduce((function(n,i){var r=Object(s.a)(i,2),c=r[0],o=r[1],d=t.combineStates(c,t.dfa.getInitialState().id,e);return a.push(d),o.reduce((function(t,e){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},e,d))}),n)}),{}),i=a.find((function(t){return t.initial})),r=new E({id:i.id,name:i.name,final:i.final},this.dfa.getInputAlphabet());return a.filter((function(t){return t.id!==i.id})).forEach((function(t){return r.addState(t.id,t.name,t.final)})),a.forEach((function(e){return Object.values(t.dfa.getStates()[e.ids[0]].edges).forEach((function(t){return r.addEdge(e.id,n[t.to].id,t.letter)}))})),{minDFA:r,stateMap:Object.entries(n).reduce((function(t,e){var a=Object(s.a)(e,2),n=a[0],i=a[1];return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},n,i.id))}),{}),table:this.table}}},{key:"step",value:function(){for(var t=!1,e=1;e<this.stateCount;e++)for(var a=Object.values(this.dfa.getStates())[e],n=0;n<e;n++){var i=Object.values(this.dfa.getStates())[n];if(this.initialStep)a.final!==i.final&&(this.table=y(this.table,a,i,[]),t=!0);else if(void 0===D(this.table,a,i))for(var r=0,c=Array.from(this.dfa.getInputAlphabet().values());r<c.length;r++){var s=c[r];this.dfa.setCurrentState(a);var o=this.dfa.read(s);this.dfa.setCurrentState(i);var d=this.dfa.read(s),u=D(this.table,o,d);if(void 0!==u){this.table=y(this.table,a,i,[s].concat(u)),t=!0;break}}}return this.initialStep=!1,t?this.table:void 0}},{key:"combineStates",value:function(t,e,a){var n=this;return{id:j.a(),name:"{".concat(a[t].map((function(t){return n.dfa.getStates()[t].name})).sort().join(", "),"}"),final:this.dfa.getStates()[t].final,initial:a[t].includes(e),ids:a[t]}}}]),t}();function I(t,e,a,n){var i,r=n?"=":"",c=void 0===(i=D(t,e,a))?"":i.length?i.reduce((function(t,e){return"".concat(t).concat(e.name)}),""):"\u03b5";return c.length?c:r}var T=function(t){var e=t.states,a=t.table,n=t.done;return Object(o.jsx)("div",{children:Object(o.jsxs)("table",{className:"min-dfa-table",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{}),Object.values(e).map((function(t){return Object(o.jsx)("th",{children:t.name},t.id)}))]})}),Object(o.jsx)("tbody",{children:Object.values(e).map((function(t,i){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:t.name}),Object.values(e).map((function(e,r){return Object(o.jsx)("td",{children:i>r?I(a,t,e,n):"-"},e.id)}))]},t.id)}))})]})})},k=function(t){var e=t.stateMap,a=t.dfa,n=t.newDFA;return Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"State"}),Object(o.jsx)("th",{children:"New State"})]})}),Object(o.jsx)("tbody",{children:Object.entries(e).map((function(t){var e=Object(s.a)(t,2),i=e[0],r=e[1];return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:a.getStates()[i].name}),Object(o.jsx)("td",{children:n.getStates()[r].name})]},i)}))})]})},F=function(){var t=i.a.useState(void 0),e=Object(s.a)(t,2),a=e[0],n=e[1],r=i.a.useState(void 0),c=Object(s.a)(r,2),u=c[0],l=c[1],b=i.a.useState(void 0),h=Object(s.a)(b,2),m=h[0],v=h[1],S=i.a.useState(!1),x=Object(s.a)(S,2),p=x[0],g=x[1],A=i.a.useState(void 0),y=Object(s.a)(A,2),D=y[0],I=y[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(O,{apply:function(t){var e=t.dfaStates[t.initialStateID],a=new Set(Array.from(Object.values(t.dfaStates).reduce((function(t,e){return Object.entries(e.edges).filter((function(t){return Object(s.a)(t,2)[1]})).forEach((function(e){var a=Object(s.a)(e,1)[0];return t.add(a)})),t}),new Set)).map((function(t){return{name:t,id:j.a()}}))),i=new E({id:t.initialStateID,name:e.name,final:e.final},a);Object.entries(t.dfaStates).filter((function(e){return Object(s.a)(e,1)[0]!==t.initialStateID})).forEach((function(t){var e=Object(s.a)(t,2),a=e[0],n=e[1];i.addState(a,n.name,n.final)})),Object.entries(t.dfaStates).forEach((function(t){var e=Object(s.a)(t,2),n=e[0],r=e[1];Object.entries(r.edges).filter((function(t){return Object(s.a)(t,2)[1]})).forEach((function(t){var e=Object(s.a)(t,2),r=e[0],c=e[1];i.addEdge(n,c,Array.from(a).find((function(t){return t.name===r})))}))})),g(!1),n(i),l(new w(i)),v(void 0),I(void 0)}}),a&&Object(o.jsxs)("div",{className:"section",children:[Object(o.jsx)("h2",{children:"DFA"}),Object(o.jsx)(d,{state:f(a),readonly:!0})]}),a&&u&&Object(o.jsxs)("div",{className:"section",children:[Object(o.jsx)("h2",{children:"Find equivalent states"}),Object(o.jsx)("button",{disabled:p,onClick:function(){try{var t=u.step();if(void 0!==t)v(t);else{g(!0);var e=u.run();v(e.table),I(e)}}catch(a){alert("Error: ".concat(a.message))}},children:"Step"}),m&&Object(o.jsx)(T,{states:a.getStates(),table:m,done:p})]}),D&&!D.minDFA&&Object(o.jsx)("div",{className:"section",children:Object(o.jsx)("h2",{children:"Already minimal"})}),a&&(null===D||void 0===D?void 0:D.stateMap)&&(null===D||void 0===D?void 0:D.minDFA)&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"section",children:[Object(o.jsx)("h2",{children:"Combine equivalent states"}),Object(o.jsx)(k,{stateMap:D.stateMap,dfa:a,newDFA:D.minDFA})]}),Object(o.jsxs)("div",{className:"section",children:[Object(o.jsx)("h2",{children:"Minimal DFA"}),Object(o.jsx)(d,{state:f(D.minDFA),readonly:!0})]})]})]})},C=function(t){var e=t.name,a=t.url,n=t.description;return Object(o.jsxs)("li",{children:[Object(o.jsx)("a",{href:a,rel:"noreferrer",target:"_blank",children:e}),": ",n]})},N=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Automata"}),Object(o.jsxs)("ul",{children:[Object(o.jsx)(C,{name:"Automaton Simulator",url:"https://automatonsimulator.com/",description:"Simulate DFAs, NFAs and PDAs"}),Object(o.jsx)(C,{name:"Turing machine visualization",url:"https://turingmachine.io/",description:"Simulate TMs"})]}),Object(o.jsx)("h2",{children:"Formal grammars"}),Object(o.jsxs)("ul",{children:[Object(o.jsx)(C,{name:"CFG Developer",url:"https://web.stanford.edu/class/archive/cs/cs103/cs103.1156/tools/cfg/",description:"Test context free grammars"}),Object(o.jsx)(C,{name:"CYK Algorithm",url:"https://www.xarg.org/tools/cyk-algorithm/",description:"Decide the word-problem for context-free grammars (step-by-step)"}),Object(o.jsx)(C,{name:"CFG to CNF",url:"https://cyberzhg.github.io/toolbox/cfg2cnf",description:"Convert context free grammars to Chomsky normal form"})]}),Object(o.jsx)("h2",{children:"Regular expressions"}),Object(o.jsxs)("ul",{children:[Object(o.jsx)(C,{name:"regex101",url:"https://regex101.com/",description:"Regex tester"}),Object(o.jsx)(C,{name:"Regex Equivalence",url:"https://regex-equality.herokuapp.com/",description:"Find out if two regular expressions match the same language"}),Object(o.jsx)(C,{name:"Regex => NFA => DFA => Min-DFA",url:"https://cyberzhg.github.io/toolbox/min_dfa",description:"Convert regex to DFA"})]})]})};var _=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Minimize DFA"}),Object(o.jsx)(F,{}),Object(o.jsx)("h1",{children:"Other useful tools"}),Object(o.jsx)(N,{}),Object(o.jsx)("hr",{}),Object(o.jsx)("a",{href:"https://github.com/an-p/automatatools",rel:"noreferrer",target:"_blank",children:"GitHub"})]})};c.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(_,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.02b88440.chunk.js.map